# Claude Progress - Job Tracker

## Session: 2026-01-02 (CV Library + CV Tailor)

### Completed: CV Library Feature

**CV Library (cards-based view on /cv page):**
- Grid layout showing all CVs (master + tailored)
- Master CV card with orange gradient styling
- Tailored CV cards show company, role, date
- Filter tabs: All / Master / Tailored
- Click card to preview PDF in modal
- Delete tailored CVs with confirmation
- Empty states for no CVs

**Files Created:**
- `app/components/CVCard.tsx` - Tailored CV card
- `app/components/MasterCVCard.tsx` - Master CV card with special styling
- `app/components/CVPreviewModal.tsx` - PDF preview modal
- `app/components/CVGrid.tsx` - Grid with filtering and state management
- `app/api/cvs/route.ts` - GET all CVs endpoint
- `app/api/cvs/[id]/route.ts` - DELETE tailored CV endpoint
- `lib/types.ts` - Added CV type
- `docs/FEATURE_CV_LIBRARY.md` - Feature specification

**Updated:**
- `app/cv/page.tsx` - Replaced text editor with CV Library grid

### Previous Work Today: CV Tailor Feature

**CV Tailor (generate tailored CVs per application):**
- Takes master CV + job URL
- Fetches JD from URL
- Generates tailored 1-page CV via Claude Sonnet
- Converts to PDF via Puppeteer
- Stores in Supabase Storage
- UI in CardDetailModal Details tab

**Files Created:**
- `lib/cv-tailor.ts` - AI CV generation logic
- `lib/pdf-generator.ts` - Puppeteer PDF generation
- `app/api/applications/[id]/tailored-cv/route.ts` - GET/POST endpoints
- `app/components/TailoredCVSection.tsx` - UI component
- `supabase/migrations/006_tailored_cv.sql` - Added tailored_cv columns
- `docs/FEATURE_CV_TAILOR.md` - Feature specification

### Auto-Generate CV on Save (c87c50b)

- CVs auto-generate in background when jobs saved with URL
- CV badge on job cards in Kanban board
- Click badge to view/download tailored CV PDF

**Files:**
- `lib/cv-auto-generate.ts` - Background CV generation
- Updated `app/api/applications/route.ts` - Trigger on POST
- Updated `app/api/applications/[id]/route.ts` - Trigger on PATCH
- Updated `app/components/ApplicationCard.tsx` - CV badge

### Next Steps
1. Test auto-generation flow end-to-end

---

## Session: 2026-01-02 (Research Chat Feature)

### Completed: Major Refactor + Research Chat

**Phase 1 - Cleanup:**
- Removed Prep tab from CardDetailModal (~300 lines)
- Removed EmailSidePanel from KanbanBoard (duplicate with Timeline)
- Deleted 4 unused files, net -313 lines of code

**Phase 2 - Research Chat Feature:**
- New interactive chat interface replacing static research view
- Components: ResearchChat, ChatMessage, SuggestedQuestions
- API routes for chat messaging and history
- Perplexity API integration for web search
- Claude Sonnet for conversational responses
- Chat history persisted in database
- 4 initial suggestions, 3-4 follow-up suggestions per response

**Files Created:**
- `app/components/ResearchChat.tsx`
- `app/components/ChatMessage.tsx`
- `app/components/SuggestedQuestions.tsx`
- `app/api/research/chat/route.ts`
- `app/api/research/chat/[applicationId]/route.ts`
- `lib/perplexity.ts`
- `lib/research-chat.types.ts`
- `supabase/migrations/005_research_chats.sql`
- `docs/FEATURE_RESEARCH_CHAT.md`

**To Use:**
1. Run migration: `005_research_chats.sql`
2. Add `PERPLEXITY_API_KEY` to `.env.local`
3. Open application → Research tab → Ask questions

**Commit:** e9c33f9

---

## Session: 2026-01-01 (Left Nav, CV Module, Skills Matcher)

### Completed: 3 Major Features in 4 Sprints

Built complete features using expert agent team:

**Sprint 1: Left Side Navigation**
- `app/components/SideNav.tsx` - Collapsible sidebar with 4 nav items
- `app/components/NavItem.tsx` - Reusable nav item component
- `app/components/AppLayout.tsx` - Layout wrapper
- Modified `app/layout.tsx` to use AppLayout
- Keyboard shortcuts: G J, G C, G R, G S
- localStorage persistence for collapse state
- Auto-collapse on mobile (<768px)

**Sprint 2: CV Module**
- `app/cv/page.tsx` - CV management page
- `app/api/cv/route.ts` - GET/POST endpoints
- `app/api/cv/[id]/route.ts` - PUT/DELETE endpoints
- `lib/cv.types.ts` - TypeScript interfaces
- `supabase/migrations/004_cv_table.sql` - Database migration
- Features: text editor, character count, save/delete with confirmation

**Sprint 3: Skills Matcher**
- `app/api/applications/[id]/analyze-match/route.ts` - AI analysis endpoint
- `lib/skills-matcher.types.ts` - TypeScript interfaces
- Updated `app/components/CardDetailModal.tsx` with Skills Matcher UI
- Uses OpenAI GPT-4o-mini for JD vs CV analysis
- Shows matched skills (green), gaps (amber), talking points

**Sprint 4: Playwright Tests**
- `tests/e2e/features.spec.ts` - E2E tests for all new features

**Documentation:**
- Updated `roadmap.md` with changelog
- PRD-001, PRD-002, PRD-003 marked as "Shipped"

**Commit:** 2410f7d - Pushed to GitHub

---

## Session: 2025-12-31 (Chrome Extension)

### Completed: Chrome Extension (Phase 3)

Built complete Chrome Extension with expert team:

**Files Created:**
- `extension/manifest.json` - Manifest V3 config
- `extension/popup.html` - Save job form UI
- `extension/popup.css` - Modern styling with warning states
- `extension/popup.js` - Form logic + duplicate checking
- `extension/content.js` - Job data extraction for LinkedIn, Indeed, Glassdoor, Ashby
- `extension/background.js` - Service worker for badge updates
- `app/api/extension/save/route.ts` - POST endpoint to save jobs
- `app/api/extension/check-duplicate/route.ts` - GET endpoint to check duplicates

**Features:**
1. Auto-extracts company, role, location from job posting pages
2. Duplicate detection before saving (warns if already exists)
3. Saves to "Saved" column in tracker
4. Works on LinkedIn, Indeed, Glassdoor, Ashby job pages
5. Clean popup UI matching main app styling

**To Install Extension:**
1. Open Chrome → `chrome://extensions/`
2. Enable "Developer mode" (top right)
3. Click "Load unpacked"
4. Select the `extension/` folder

**Icons Needed:**
Create PNG icons (16x16, 48x48, 128x128) or Chrome will use placeholders.

---

## Previous Session: Research Feature Fix

Fixed research API to use REAL data from job postings:
- Changed from GET to POST method
- Added job URL fetching + content extraction
- Added email context fetching
- Handles JavaScript-rendered pages (meta tags, JSON-LD)
- Correctly extracts voize.de domain, Berlin HQ, Series A funding

---

## Next Steps

1. Add icons to extension (optional - works without)
2. Deploy to production and update extension's API_BASE_URL
3. Consider publishing to Chrome Web Store
4. Phase 4: Resume Management (file upload, version tracking)
